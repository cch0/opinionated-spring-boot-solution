version: '3'
services:
  account-service:
    build: account-service
    image: opinionated-spring-boot-solution_account-service:latest
    ports:
      - "8080:8080"
    environment: 
      - SPRING_PROFILES_ACTIVE=docker
    depends_on:
      - payment-service
      - zipkin-server
    networks:
      - backend  
  payment-service:
    build: payment-service
    image: opinionated-spring-boot-solution_payment-service:latest
    ports:
      - "8081:8080"
    environment: 
      - SPRING_PROFILES_ACTIVE=docker      
    depends_on:
      - zipkin-server
    networks:
      - backend  
  zipkin-server:
    image: "openzipkin/zipkin"
    ports: 
      - "9411:9411"
    networks:
      - backend  

networks:
  backend: